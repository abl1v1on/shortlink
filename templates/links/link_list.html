{% extends "base.html" %}

{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row">
    <nav class="col-md-3 col-lg-2 sidebar">
      <div class="user-info text-center mb-4">
        {% if user.profile.avatar %}
          <img src="{{ user.profile.picture.url }}" alt="Аватар" class="img-fluid rounded-circle" style="width: 100px; height: 100px;">
        {% else %}
          <img src="{% static 'default-avatar.jpg' %}" alt="Аватар" class="img-fluid rounded-circle" style="width: 100px; height: 100px;">
        {% endif %}
        <h4>Привет, {{ user.username }}!</h4>
        <p>Электронная почта: {{ user.email }}</p>
      </div>
      <hr>
      <a href="#">Мои ссылки</a>
      <a href="#">Профиль</a>
      <form method="POST" action="{% url 'users:logout' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-link">Выход</button>
      </form>
    </nav>

    <main class="col-md-9 col-lg-10 content">
      <h2>Мои ссылки</h2>
      {% for link in links %}
      <div class="link-card">
        <p><strong>Исходная ссылка: </strong><a href="{{ link.source_link }}" class="short-link" target="_blank">{{ link.source_link }}</a></p>
        <p><strong>Сокращённая ссылка:</strong> 
          <a href="{{ link.get_absolute_url }}" class="short-link" target="_blank">{{ link.get_absolute_url }}</a>
        </p>
        <p><strong>Количество переходов:</strong> {{ link.redirects_count }}</p>
        <p><strong>Дата создания:</strong> {{ link.date_created }}</p>
        <p><strong>Теги:</strong>
          {% for tag in link.tags.all %}
          <span class="tag">тег</span>
          {% empty %}
          Теги отсутствуют
          {% endfor %}
        </p>
      </div>
      {% empty %}
      <h3>Вы не создали ни одной ссылки, вы можете сделать это на странице <a href="{% url "links:create_link" %}" class="short-link">создания ссылок</a></h3>
      {% endfor %}
    </main>
  </div>
</div>
{% endblock %}
